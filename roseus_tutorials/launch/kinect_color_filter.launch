<launch>
  <node pkg="nodelet" type="nodelet" name="pcl_manager"
        args="manager" output="screen"/>

  <node pkg="nodelet" type="nodelet" name="passthrough"
        args="load pcl/PassThrough pcl_manager" output="screen">
    <remap from="~input" to="/camera/depth_registered/points" />
    <remap from="~output" to="/hsv_input" />
    <rosparam>
      filter_field_name: z
      filter_limit_min: 0.0
      filter_limit_max: 4.0
      filter_limit_negative: False
    </rosparam>
  </node>

  <node pkg="nodelet" type="nodelet" name="red_filter"
        args="load jsk_pcl/HSVColorFilter pcl_manager" output="screen"
        clear_params="true">
    <remap from="~input" to="/hsv_input" />
    <remap from="~output" to="/filtered_red" />
    <rosparam>
      use_indices: false
      h_limit_max: 13
      h_limit_min: -13
      s_limit_max: 255
      s_limit_min: 110
      v_limit_max: 255
      v_limit_min: 25
    </rosparam>
  </node>

  <node pkg="roseus" type="roseus" name="publish_red_centroid"
        args="$(find roseus_tutorials)/src/subscribe-pointcloud.l"
        output="screen" >
    <param name="centrodi_frame" value="/red_centroid" />
    <remap from="/camera/depth_registered/points" to="/filtered_red" />
  </node>
</launch>
